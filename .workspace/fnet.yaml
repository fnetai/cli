name: cli
commands:
  build:
    - bun run build
    - node ./dist/fnode/index.js --version
    - node ./dist/fnet/index.js --version
    - bun link
  deploy:
    - fnet build
    - bun publish --access public
  compile:
    steps:
      - fnet run build
      - bun build ./dist/fnode/index.js --compile --outfile=.bin/fnode
      - bun build ./dist/fnet/index.js --compile --outfile=.bin/fnet
      - chmod +x .bin/fnode && chmod +x .bin/fnet
      - chmod +x .bin/fnode && chmod +x .bin/fnet
      - du -h .bin/fnode && du -h .bin/fnet
      - .bin/fnode --version && .bin/fnet --version
      - .bin/fnode --help && .bin/fnet --help
      - otool -L .bin/fnode && otool -L .bin/fnet
      - file .bin/fnode && file .bin/fnet
      - cp .bin/fnode /usr/local/bin/xfnode && cp .bin/fnet /usr/local/bin/xfnet
      - chmod +x /usr/local/bin/xfnode && chmod +x /usr/local/bin/xfnet
      - du -h /usr/local/bin/xfnode && du -h /usr/local/bin/xfnet
bundleName: CLI
features:
  main_default_entry_file: index.js
  project:
    format: esm
  project_format: esm
  dts_enabled: false
  form_enabled: false
  multiple_enabled: false
  app:
    enabled: true
    extend: false
    export: true
    react: false
    format: esm
    folder: esm
    dir: ./dist/app/esm
  cli:
    enabled: true
    extend: false
    export: true
    react: false
    format: esm
    folder: esm
    node_options: ""
    dir: ./dist/cli/esm
  json: true
  babel_options: &a1
    targets:
      browsers: last 9 versions, not dead
      node: "18"
  browsersync_options: &a2
    server: .
    startPath: dist/app/esm
    files:
      - dist/**/*
    cors: true
    open: false
  replace_options: &a3 {}
  rollup: {}
  rollup_output:
    cjs:
      format: cjs
      context: global
      babel: false
      browser: false
      replace: true
      enabled: true
      babel_options: *a1
      browsersync_options: *a2
      replace_options: *a3
      json:
        enabled: true
        options: {}
    esm:
      format: esm
      context: global
      babel: false
      browser: false
      replace: true
      enabled: true
      copy:
        enabled: true
        options:
          targets: &a4
            - src: ./src/app/index.html
              dest: ./dist/app/esm
      babel_options: *a1
      browsersync_options: *a2
      replace_options: *a3
      json:
        enabled: true
        options: {}
    iife:
      format: iife
      context: global
      babel: true
      browser: true
      replace: true
      enabled: false
      babel_options: *a1
      browsersync_options: *a2
      replace_options: *a3
      json:
        enabled: true
        options: {}
    app:
      format: esm
      browser: true
      babel: true
      context: window
      replace: true
      input: ./src/app/index.js
      output_dir: ./dist/app/esm
      output_exports: auto
      browsersync: true
      babel_options: *a1
      browsersync_options: *a2
      replace_options: *a3
      copy:
        enabled: true
        options:
          targets: *a4
      json:
        enabled: true
        options: {}
    cli:
      format: esm
      context: global
      babel: false
      browser: false
      replace: true
      enabled: true
      input: ./src/cli/index.js
      output_dir: ./dist/cli/esm
      banner: "#!/usr/bin/env node"
      output_exports: auto
      babel_options: *a1
      browsersync_options: *a2
      replace_options: *a3
      copy:
        enabled: true
        options:
          targets: *a4
      json:
        enabled: true
        options: {}
  babel_enabled: true
  browser_enabled: true
  browsersync_enabled: true
  dependency_auto_enabled: true
  npm_install_flags: ""
  react_version: 18
  css_enabled: false
  copy: true
  copy_enabled: true
  wasm_enabled: false
  terser_enabled: false
  json_enabled: true
  string_enabled: false
  image_enabled: false
  analyzer_enabled: false
  visualizer_enabled: false
  polyfill_enabled: false
  nunjucks_enabled: false
  workbox_enabled: false
  gzip_enabled: false
